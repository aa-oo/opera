<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link href="css/try.css" rel="stylesheet" />
	</head>

	<body>
		<script src="js/mui.min.js"></script>
	<!--	<script src="js/ipt.js"></script>-->
		<script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(    
        function() {  
      	var offCanvasSide=window.parent.document.getElementById('offCanvasSide')
      	var t=localStorage.getItem('t')
      	console.log(t);
      	var ul=document.getElementById("listul");
      	for(var i=1;i<=t;i++){
      		console.log(t);
      		var lii=document.createElement('li');
      		lii.setAttribute("id", "li"+i);
            lii.setAttribute("class","mui-table-view-cell");
            ul.appendChild(lii);
            console.log( localStorage.getItem("ip"+i).substring(7,20));
            console.log("li"+i);
            console.log(listul);
            document.getElementById("li"+i).innerHTML = localStorage.getItem("ip"+i).substring(7,20);
     		var div=document.createElement('div');
                       		div.setAttribute("id", "newDiv");
                       		ul.appendChild(div);
							var ip=localStorage.getItem("ip"+i).substring(7,20);
							console.log(ip);
							document.getElementById("li"+i).addEventListener('tap', function(){
								var btnArray = ['确定', '取消'];
    							var message = '<h5>请进行选择</h5>';
    							mui.confirm(message, '是否确认连接该IP', btnArray, function(e) {
    							
    								var ipt;
    								var back;
									
    								// console.log(ip.substring(7,20));    								
    										 if (e.index == 1){
    										 	back=0;
    										 	console.log(back);
       										 }
    										 else{
    										 	ipt=ip;
    										 	localStorage.setItem("ipt",ipt);
												localStorage.setItem("lianjie",1);
    										 	back=1;
    									}
    										 console.log(back);
									
    										 if(back==1){
												 mui.alert("连接成功",function(){
													 var cPage = plus.webview.currentWebview();
													 var bPage = cPage.opener();
													 var aPage=bPage.opener();
													 cPage.close();
													 bPage.close();
													 })
    										 	
												// mui.openWindow({
												//     url:'index.html',
												//     id:'index',
												 
												//       styles:{
												//       	top:'45px',//mui标题栏默认高度为45px；
												//       	bottom:'0px'//默认为0px，可不定义；
												//       }
												//   })
    										 }
    							},'div');
            				});
        }
           
      	
                       		
//                     		
//    	 function disLoad() {  
//   $(".datagrid-mask").remove();  
//   $(".datagrid-mask-msg").remove();  
// }
//    	 disLoad();
   
//			var offCanvasSide=document.getElementById('offCanvasSide');
//				offCanvasSide.style.visibility='visible';
if( Object.prototype.toString.call(this.mui('.mui-progressbar').progressbar()) === '[Object Object]' ){
	mui(".listl").progressbar().show();
}


				
			});
		</script>
		
		<ul class="mui-table-view mui-progressbar-infinite" id="listul">
		
		</ul>
	
	</body>

</html>